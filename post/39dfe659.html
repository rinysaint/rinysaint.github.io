
<!DOCTYPE html>
<html lang="zh-Hans" class="loading">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>不用Docker，实现群晖+阿里云DDNS解决动态IP访问 - 萧日宁的世界</title>
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta http-equiv="Access-Control-Allow-Origin" content="*" />
    <meta name="keywords" content="萧日宁,肖日宁,君子兰,人工智能,AI,机器学习,博客,大数据,微服务,xiaorining,kingslanding,ddns,群晖,动态IP,阿里云,Docker"> 
    <meta name="description" content="萧日宁,肖日宁,君子兰,人工智能,AI,机器学习,博客,大数据,微服务,xiaorining,kingslanding,摘要：
题记：此文只为我们这些小白提供更直白的解决方法，解决阿里云DDNS访问自己的群晖问题。所有的技术性内容都不是本人原创，只是原作者的解释很多像我这样小白都不懂，我拿来整合解释如何使用而已。看了,"> 
    <meta name="author" content="萧日宁"> 
    <link rel="alternative" href="atom.xml" title="萧日宁的世界" type="application/atom+xml"> 
    <link rel="icon" href="/img/favicon.png"> 
    
    
<link rel="stylesheet" href="/css/diaspora.css">
<link rel="stylesheet" href="/css/APlayer.min.css">

<meta name="generator" content="Hexo 5.4.0"></head>

<body class="loading">
    <span id="config-title" style="display:none">萧日宁的世界</span>
    <div id="loader"></div>
    <div id="single">
    <div id="top" style="display: block;">
    <div class="bar" style="width: 0;"></div>
    <a class="iconfont icon-home image-icon" href="javascript:;" data-url="https://kingslanding.cn"></a>
        <!-- page音乐插件 -->
        
    <h3 class="subtitle">不用Docker，实现群晖+阿里云DDNS解决动态IP访问</h3>
    <div class="social">
        <div>
            <div class="share">
                <a title="获取二维码" class="iconfont icon-scan" href="javascript:;"></a>
            </div>
            <div id="qr"></div>
        </div>
    </div>
    <div class="scrollbar"></div>
</div>

    <div class="section">
        <div class="article">
    <div class='main'>
        <h1 class="title">不用Docker，实现群晖+阿里云DDNS解决动态IP访问</h1>
        <div class="stuff">
            <span>十二月 23, 2018</span>
            
  <ul class="post-tags-list" itemprop="keywords"><li class="post-tags-list-item"><a class="post-tags-list-link" href="/tags/ddns/" rel="tag">ddns</a></li></ul>


        </div>
        <div class="content markdown">
            <p><strong>摘要：</strong></p>
<p>题记：此文只为我们这些小白提供更直白的解决方法，解决阿里云DDNS访问自己的群晖问题。所有的技术性内容都不是本人原创，只是原作者的解释很多像我这样小白都不懂，我拿来整合解释如何使用而已。看了 rucent 发表的《群晖+aliDDNS解决动态IP访问》，根据说明还是搞不定。突然在评论区里面发现了干货。可以用脚本进行更新。</p>
<p>注：本稿件最初发布在《什么值得买》网。</p>
<p>题记：此文只为我们这些小白提供更直白的解决方法，解决阿里云DDNS访问自己的<a target="_blank" rel="noopener" href="https://b.gx86.cn/zb_users/theme/zbpNana/goto/?url=http://pinpai.smzdm.com/2315/">群晖</a>问题。所有的技术性内容都不是本人原创，只是原作者的解释很多像我这样小白都不懂，我拿来整合解释如何使用而已。</p>
<p>看了 rucent 发表的《<a target="_blank" rel="noopener" href="https://b.gx86.cn/zb_users/theme/zbpNana/goto/?url=https://post.smzdm.com/p/571595/">群晖+aliDDNS解决动态IP访问</a>》，根据说明还是搞不定。突然在评论区里面发现了干货。有更简单的解决方法“ <a target="_blank" rel="noopener" href="https://b.gx86.cn/zb_users/theme/zbpNana/goto/?url=https://zhiyou.smzdm.com/member/1497333417">可爱的排骨</a> ： 我这有自己写的4个(dnspod, qcloud, aliyun, cloudxns) ddns更新脚本, 放到群晖某个<a target="_blank" rel="noopener" href="https://b.gx86.cn/zb_users/theme/zbpNana/goto/?url=https://www.smzdm.com/fenlei/wenjianjia/">文件夹</a>里, 直接计划任务里添加就能用, 不需要装python也不需要手工ssh。”</p>
<p><img src="/../images/%E4%B8%8D%E7%94%A8Docker%EF%BC%8C%E5%AE%9E%E7%8E%B0%E7%BE%A4%E6%99%96+%E9%98%BF%E9%87%8C%E4%BA%91DDNS%E8%A7%A3%E5%86%B3%E5%8A%A8%E6%80%81IP%E8%AE%BF%E9%97%AE/201901141547476289578493.jpg" alt="不用Docker，实现群晖+阿里云DDNS解决动态IP访问第1张-来时的路"></p>
<p><strong>环境：</strong></p>
<p>有公网非固定IP；</p>
<p>防火墙/<a target="_blank" rel="noopener" href="https://b.gx86.cn/zb_users/theme/zbpNana/goto/?url=https://www.smzdm.com/fenlei/luyouqi/">路由器</a>能做端口映射；</p>
<p>有阿里云顶级域名，或者在阿里云做域名解释（我就是腾讯云的域名，搞不定腾讯云的动态解析，就接在阿里云做解析）！</p>
<p><strong>一、有域名</strong>。关于申请域名申请和accesskey申请，请参考rucent 的《<a target="_blank" rel="noopener" href="https://b.gx86.cn/zb_users/theme/zbpNana/goto/?url=https://post.smzdm.com/p/571595/">群晖+aliDDNS解决动态IP访问</a>》 的步骤1-3。</p>
<p><strong>二、部署群晖</strong>。</p>
<p>1、下载源文件：<a target="_blank" rel="noopener" href="https://b.gx86.cn/zb_users/theme/zbpNana/goto/?url=https://github.com/cuteribs/ribsnetwork/tree/master/ddns">点我</a>（点击进去后，记得是对文件右键另存为，切勿是打开文本复制新建脚本文件，否则会乱码错误），里面有6个文件，其实单单下载 aliyun.sh 即可。</p>
<p>2、上传文件到群晖的某个目录。我的是放在web文件夹下，图中路径为setting/aliddns/aliyun.sh，但实际路径应该是： /volume1/setting/aliddns/aliyun.sh，建议建立独立的文件夹。</p>
<p><img src="/../images/%E4%B8%8D%E7%94%A8Docker%EF%BC%8C%E5%AE%9E%E7%8E%B0%E7%BE%A4%E6%99%96+%E9%98%BF%E9%87%8C%E4%BA%91DDNS%E8%A7%A3%E5%86%B3%E5%8A%A8%E6%80%81IP%E8%AE%BF%E9%97%AE/201901141547476289735081.png" alt="#原创新人#不用Docker，实现群晖+阿里云DDNS解决动态IP访问"></p>
<p><img src="/../images/%E4%B8%8D%E7%94%A8Docker%EF%BC%8C%E5%AE%9E%E7%8E%B0%E7%BE%A4%E6%99%96+%E9%98%BF%E9%87%8C%E4%BA%91DDNS%E8%A7%A3%E5%86%B3%E5%8A%A8%E6%80%81IP%E8%AE%BF%E9%97%AE/201901141547476289321600.png" alt="#原创新人#不用Docker，实现群晖+阿里云DDNS解决动态IP访问"></p>
<p>3、写执行代码的任务计划。</p>
<p> 在控制面板-任务计划–新增 </p>
<p><img src="/../images/%E4%B8%8D%E7%94%A8Docker%EF%BC%8C%E5%AE%9E%E7%8E%B0%E7%BE%A4%E6%99%96+%E9%98%BF%E9%87%8C%E4%BA%91DDNS%E8%A7%A3%E5%86%B3%E5%8A%A8%E6%80%81IP%E8%AE%BF%E9%97%AE/201901141547476290224212.png" alt="#原创新人#不用Docker，实现群晖+阿里云DDNS解决动态IP访问"></p>
<p>填写任务名称随意填。时间频率，根据实际情况吧，5-20分钟都有人用。</p>
<p><img src="/../images/%E4%B8%8D%E7%94%A8Docker%EF%BC%8C%E5%AE%9E%E7%8E%B0%E7%BE%A4%E6%99%96+%E9%98%BF%E9%87%8C%E4%BA%91DDNS%E8%A7%A3%E5%86%B3%E5%8A%A8%E6%80%81IP%E8%AE%BF%E9%97%AE/201901141547476290851659.png" alt="#原创新人#不用Docker，实现群晖+阿里云DDNS解决动态IP访问"></p>
<p><strong>关键是任务脚本的填写。格式为 sh aliyun.sh {AccessKeyId} {AccessKeySecret} ex<a target="_blank" rel="noopener" href="https://b.gx86.cn/zb_users/theme/zbpNana/goto/?url=http://pinpai.smzdm.com/36085/">ample</a>.com www，要注意空格，每个子域名一行，</strong></p>
<p><img src="/../images/%E4%B8%8D%E7%94%A8Docker%EF%BC%8C%E5%AE%9E%E7%8E%B0%E7%BE%A4%E6%99%96+%E9%98%BF%E9%87%8C%E4%BA%91DDNS%E8%A7%A3%E5%86%B3%E5%8A%A8%E6%80%81IP%E8%AE%BF%E9%97%AE/201901141547476290686688.png" alt="#原创新人#不用Docker，实现群晖+阿里云DDNS解决动态IP访问"></p>
<p>此处为隐藏内容，请评论后查看隐藏内容，谢谢！</p>
<p>最终访问域名为s.g<strong>6.cn f.g</strong>6.cn <a target="_blank" rel="noopener" href="http://www.g**6.cn/">www.g**6.cn</a> 遗憾的是，测试发现不支持主域名修改，原因不明，但是看代码里面是有@的判断，只是我不懂此类语言，也是大概猜的。 </p>
<p>填好后，保存，在选中刚建立的任务，再点击“运行”一下，就可以在阿里云消息看到结果了。</p>
<p><img src="/../images/%E4%B8%8D%E7%94%A8Docker%EF%BC%8C%E5%AE%9E%E7%8E%B0%E7%BE%A4%E6%99%96+%E9%98%BF%E9%87%8C%E4%BA%91DDNS%E8%A7%A3%E5%86%B3%E5%8A%A8%E6%80%81IP%E8%AE%BF%E9%97%AE/201901141547476290823463.png" alt="#原创新人#不用Docker，实现群晖+阿里云DDNS解决动态IP访问"></p>
<p>后记：原作者的<a target="_blank" rel="noopener" href="https://b.gx86.cn/zb_users/theme/zbpNana/goto/?url=https://github.com/cuteribs/ribsnetwork/blob/master/ddns/qcloud.sh">qcloud.sh</a>，经后期测试，腾讯云API（DDNS）也是可以使用的，而且还支持主域名@的修改，KEY生成的地址：<a target="_blank" rel="noopener" href="https://b.gx86.cn/zb_users/theme/zbpNana/goto/?url=https://console.cloud.tencent.com/cam/capi">点我</a>。 </p>
<p>本人也转用qcloud，如下图。</p>
<p><img src="/../images/%E4%B8%8D%E7%94%A8Docker%EF%BC%8C%E5%AE%9E%E7%8E%B0%E7%BE%A4%E6%99%96+%E9%98%BF%E9%87%8C%E4%BA%91DDNS%E8%A7%A3%E5%86%B3%E5%8A%A8%E6%80%81IP%E8%AE%BF%E9%97%AE/201901141547476290352345.png" alt="#原创新人#不用Docker，实现群晖+阿里云DDNS解决动态IP访问"></p>

            <!--[if lt IE 9]><script>document.createElement('audio');</script><![endif]-->
            <audio id="audio" loop="1" preload="auto" controls="controls" data-autoplay="false">
                <source type="audio/mpeg" src="">
            </audio>
            
                <ul id="audio-list" style="display:none">
                    
                </ul>
            
        </div>
        
    <div id='gitalk-container' class="comment link"
		data-enable='false'
        data-ae='false'
        data-ci=''
        data-cs=''
        data-r=''
        data-o=''
        data-a=''
        data-d='false'
    >查看评论</div>


    </div>
    
        <div class='side'>
				
        </div>
    
</div>


    </div>
</div>
</body>


<script src="//lib.baomitu.com/jquery/1.8.3/jquery.min.js"></script>
<script src="/js/plugin.js"></script>
<script src="/js/typed.js"></script>
<script src="/js/diaspora.js"></script>


<link rel="stylesheet" href="/photoswipe/photoswipe.css">
<link rel="stylesheet" href="/photoswipe/default-skin/default-skin.css">


<script src="/photoswipe/photoswipe.min.js"></script>
<script src="/photoswipe/photoswipe-ui-default.min.js"></script>


<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>
    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">
        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>
        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">
            <div class="pswp__top-bar">
                <!--  Controls are self-explanatory. Order can be changed. -->
                <div class="pswp__counter"></div>
                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                <button class="pswp__button pswp__button--share" title="Share"></button>
                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>
            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>
            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>
            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>
            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>
        </div>
    </div>
</div>




</html>
